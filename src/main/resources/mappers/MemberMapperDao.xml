<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.iyy.mapper.MemberMapperDao">
  <resultMap id="BaseResultMap" type="com.iyy.entity.Member">
    <id column="member_id" jdbcType="INTEGER" property="memberId" />
    <result column="member_nickname" jdbcType="VARCHAR" property="memberNickname" />
    <result column="mobile_number" jdbcType="VARCHAR" property="mobileNumber" />
    <result column="member_gender" jdbcType="VARCHAR" property="memberGender" />
    <result column="accumulate_money" jdbcType="DECIMAL" property="accumulateMoney" />
    <result column="member_integral" jdbcType="INTEGER" property="memberIntegral" />
    <result column="open_id" jdbcType="VARCHAR" property="openId" />
    <result column="status" jdbcType="VARCHAR" property="status" />
    <result column="create_date" jdbcType="TIMESTAMP" property="createDate" />
    <result column="create_user" jdbcType="VARCHAR" property="createUser" />
    <result column="login_count" jdbcType="INTEGER" property="loginCount" />
  </resultMap>
  <sql id="Base_Column_List">
    member_id, member_nickname, mobile_number, member_gender, accumulate_money, member_integral, 
    open_id, status, create_date, create_user, login_count
  </sql>

  <select id="queyrMemberList" resultMap="BaseResultMap">
    select
        *
    from tb_member
    <where>
      <if test="memberNickname != null and memberNickname != ''">
        and (member_nickname like concat('%', #{memberNickname}, '%') or mobile_number =#{memberNickname} )
      </if>
      <if test="mobileNumber != null and mobileNumber != ''">
        and mobile_number = #{mobileNumber}
      </if>
    </where>
  </select>

  <select id="getMemberInfo" resultMap="BaseResultMap">
    select
        *
    from tb_member
    where member_id = #{memberId}
  </select>

</mapper>